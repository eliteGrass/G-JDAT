<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ä»£ç†æ¨¡å¼å¯¹æ¯”æ¼”ç¤º - ä½¿ç”¨å‰åå·®å¼‚</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 1600px;
      margin: 0 auto;
    }

    .header {
      text-align: center;
      color: white;
      margin-bottom: 40px;
    }

    .header h1 {
      font-size: 42px;
      margin-bottom: 15px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    }

    .header p {
      font-size: 18px;
      opacity: 0.95;
    }

    .comparison-section {
      background: white;
      border-radius: 20px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .section-title {
      font-size: 28px;
      color: #667eea;
      margin-bottom: 20px;
      border-bottom: 3px solid #667eea;
      padding-bottom: 10px;
    }

    .comparison-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
    }

    .comparison-panel {
      background: #f8f9fa;
      border-radius: 15px;
      padding: 25px;
      position: relative;
    }

    .panel-header {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 2px solid #e0e0e0;
    }

    .panel-icon {
      font-size: 32px;
      margin-right: 15px;
    }

    .panel-title {
      font-size: 22px;
      font-weight: 700;
    }

    .panel-title.without {
      color: #f44336;
    }

    .panel-title.with {
      color: #4caf50;
    }

    .stats-badge {
      position: absolute;
      top: 20px;
      right: 20px;
      padding: 8px 15px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: bold;
    }

    .stats-badge.bad {
      background: #ffcdd2;
      color: #c62828;
    }

    .stats-badge.good {
      background: #c8e6c9;
      color: #2e7d32;
    }

    .form-group {
      margin-bottom: 15px;
    }

    .form-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: 600;
      color: #333;
      font-size: 14px;
    }

    .form-group input {
      width: 100%;
      padding: 10px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 14px;
      transition: all 0.3s;
    }

    .form-group input.error {
      border-color: #f44336;
    }

    .form-group input.success {
      border-color: #4caf50;
    }

    .error-message {
      color: #f44336;
      font-size: 12px;
      margin-top: 5px;
      display: none;
    }

    .error-message.show {
      display: block;
    }

    .code-display {
      background: #282c34;
      color: #abb2bf;
      padding: 15px;
      border-radius: 8px;
      font-family: 'Courier New', monospace;
      font-size: 12px;
      margin: 15px 0;
      overflow-x: auto;
      max-height: 200px;
      overflow-y: auto;
    }

    .code-line {
      margin: 3px 0;
      line-height: 1.5;
    }

    .keyword { color: #c678dd; }
    .string { color: #98c379; }
    .function { color: #61afef; }
    .comment { color: #5c6370; }
    .number { color: #d19a66; }

    .action-button {
      width: 100%;
      padding: 12px;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      margin-top: 15px;
    }

    .action-button.without {
      background: #f44336;
      color: white;
    }

    .action-button.with {
      background: #4caf50;
      color: white;
    }

    .action-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }

    .stats-container {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
      margin-top: 20px;
    }

    .stat-card {
      background: white;
      padding: 15px;
      border-radius: 10px;
      text-align: center;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .stat-label {
      font-size: 12px;
      color: #666;
      margin-bottom: 5px;
    }

    .stat-value {
      font-size: 24px;
      font-weight: bold;
    }

    .stat-value.bad { color: #f44336; }
    .stat-value.good { color: #4caf50; }

    .log-container {
      background: #1e1e1e;
      border-radius: 10px;
      padding: 15px;
      max-height: 200px;
      overflow-y: auto;
      font-family: 'Courier New', monospace;
      font-size: 12px;
      margin-top: 15px;
    }

    .log-entry {
      margin: 5px 0;
      padding: 5px;
      border-left: 3px solid transparent;
    }

    .log-error { color: #f44336; border-left-color: #f44336; }
    .log-success { color: #4caf50; border-left-color: #4caf50; }
    .log-info { color: #2196f3; border-left-color: #2196f3; }
    .log-warning { color: #ff9800; border-left-color: #ff9800; }

    .comparison-summary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 30px;
      border-radius: 15px;
      margin-top: 20px;
    }

    .summary-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      margin-top: 20px;
    }

    .summary-item {
      background: rgba(255, 255, 255, 0.1);
      padding: 15px;
      border-radius: 10px;
    }

    .summary-item h4 {
      font-size: 18px;
      margin-bottom: 10px;
    }

    .summary-item ul {
      list-style: none;
      padding-left: 0;
    }

    .summary-item li {
      padding: 5px 0;
      font-size: 14px;
    }

    .summary-item li::before {
      margin-right: 8px;
    }

    .summary-item.without li::before {
      content: 'âŒ';
    }

    .summary-item.with li::before {
      content: 'âœ…';
    }

    .tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }

    .tab {
      padding: 12px 24px;
      background: #e0e0e0;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s;
    }

    .tab.active {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    @media (max-width: 1200px) {
      .comparison-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ğŸ”„ ä»£ç†æ¨¡å¼å¯¹æ¯”æ¼”ç¤º</h1>
      <p>ç›´è§‚æ„Ÿå—"ä½¿ç”¨ä»£ç†"ä¸"ä¸ä½¿ç”¨ä»£ç†"çš„å·¨å¤§å·®å¼‚</p>
    </div>

    <!-- æ ‡ç­¾åˆ‡æ¢ -->
    <div class="comparison-section">
      <div class="tabs">
        <button class="tab active" onclick="switchTab(0)">ğŸ“ åœºæ™¯1: è¡¨å•éªŒè¯</button>
        <button class="tab" onclick="switchTab(1)">ğŸ”„ åœºæ™¯2: å“åº”å¼æ•°æ®</button>
        <button class="tab" onclick="switchTab(2)">ğŸŒ åœºæ™¯3: APIç¼“å­˜</button>
      </div>

      <!-- åœºæ™¯1: è¡¨å•éªŒè¯ -->
      <div class="tab-content active" id="tab0">
        <h2 class="section-title">åœºæ™¯1: è¡¨å•éªŒè¯å¯¹æ¯”</h2>

        <div class="comparison-grid">
          <!-- ä¸ä½¿ç”¨ä»£ç† -->
          <div class="comparison-panel">
            <div class="panel-header">
              <span class="panel-icon">âŒ</span>
              <h3 class="panel-title without">ä¸ä½¿ç”¨ä»£ç†ï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰</h3>
            </div>
            <span class="stats-badge bad">ä»£ç è¡Œæ•°: ~80è¡Œ</span>

            <div class="form-group">
              <label>ç”¨æˆ·åï¼ˆè‡³å°‘3ä¸ªå­—ç¬¦ï¼‰</label>
              <input type="text" id="without-name" placeholder="è¾“å…¥ç”¨æˆ·å">
              <div class="error-message" id="without-name-error"></div>
            </div>

            <div class="form-group">
              <label>å¹´é¾„ï¼ˆ0-150ï¼‰</label>
              <input type="number" id="without-age" placeholder="è¾“å…¥å¹´é¾„">
              <div class="error-message" id="without-age-error"></div>
            </div>

            <div class="form-group">
              <label>é‚®ç®±</label>
              <input type="email" id="without-email" placeholder="è¾“å…¥é‚®ç®±">
              <div class="error-message" id="without-email-error"></div>
            </div>

            <button class="action-button without" onclick="submitWithoutProxy()">æäº¤ï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰</button>

            <div class="code-display">
              <div class="code-line"><span class="comment">// æ¯ä¸ªå­—æ®µéƒ½è¦å†™setterå’ŒéªŒè¯</span></div>
              <div class="code-line"><span class="keyword">function</span> <span class="function">setName</span>(value) {</div>
              <div class="code-line">  <span class="keyword">if</span> (value.length < <span class="number">3</span>) {</div>
              <div class="code-line">    showError(<span class="string">'name'</span>, <span class="string">'è‡³å°‘3ä¸ªå­—ç¬¦'</span>);</div>
              <div class="code-line">    <span class="keyword">return</span> <span class="keyword">false</span>;</div>
              <div class="code-line">  }</div>
              <div class="code-line">  data.name = value;</div>
              <div class="code-line">  updateUI(<span class="string">'name'</span>);</div>
              <div class="code-line">}</div>
              <div class="code-line"><span class="comment">// setAge()ã€setEmail() é‡å¤ç›¸åŒæ¨¡å¼...</span></div>
            </div>

            <div class="log-container" id="without-log"></div>
          </div>

          <!-- ä½¿ç”¨ä»£ç† -->
          <div class="comparison-panel">
            <div class="panel-header">
              <span class="panel-icon">âœ…</span>
              <h3 class="panel-title with">ä½¿ç”¨ä»£ç†ï¼ˆç°ä»£æ–¹å¼ï¼‰</h3>
            </div>
            <span class="stats-badge good">ä»£ç è¡Œæ•°: ~25è¡Œ</span>

            <div class="form-group">
              <label>ç”¨æˆ·åï¼ˆè‡³å°‘3ä¸ªå­—ç¬¦ï¼‰</label>
              <input type="text" id="with-name" placeholder="è¾“å…¥ç”¨æˆ·å">
              <div class="error-message" id="with-name-error"></div>
            </div>

            <div class="form-group">
              <label>å¹´é¾„ï¼ˆ0-150ï¼‰</label>
              <input type="number" id="with-age" placeholder="è¾“å…¥å¹´é¾„">
              <div class="error-message" id="with-age-error"></div>
            </div>

            <div class="form-group">
              <label>é‚®ç®±</label>
              <input type="email" id="with-email" placeholder="è¾“å…¥é‚®ç®±">
              <div class="error-message" id="with-email-error"></div>
            </div>

            <button class="action-button with" onclick="submitWithProxy()">æäº¤ï¼ˆä»£ç†æ–¹å¼ï¼‰</button>

            <div class="code-display">
              <div class="code-line"><span class="comment">// åªéœ€é…ç½®è§„åˆ™ï¼Œè‡ªåŠ¨æ‹¦æˆªæ‰€æœ‰èµ‹å€¼</span></div>
              <div class="code-line"><span class="keyword">const</span> data = <span class="keyword">new</span> <span class="function">Proxy</span>({}, {</div>
              <div class="code-line">  <span class="function">set</span>(target, key, value) {</div>
              <div class="code-line">    <span class="keyword">const</span> error = validate(key, value);</div>
              <div class="code-line">    <span class="keyword">if</span> (error) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">Error</span>(error);</div>
              <div class="code-line">    target[key] = value;</div>
              <div class="code-line">  }</div>
              <div class="code-line">});</div>
              <div class="code-line"><span class="comment">// æ‰€æœ‰å­—æ®µè‡ªåŠ¨æ”¯æŒéªŒè¯ï¼</span></div>
            </div>

            <div class="log-container" id="with-log"></div>
          </div>
        </div>

        <div class="stats-container">
          <div class="stat-card">
            <div class="stat-label">ä»£ç å‡å°‘</div>
            <div class="stat-value good">70%</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">éªŒè¯æ¬¡æ•°ï¼ˆä¸ä½¿ç”¨ä»£ç†ï¼‰</div>
            <div class="stat-value bad" id="without-validations">0</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">éªŒè¯æ¬¡æ•°ï¼ˆä½¿ç”¨ä»£ç†ï¼‰</div>
            <div class="stat-value good" id="with-validations">0</div>
          </div>
        </div>
      </div>

      <!-- åœºæ™¯2: å“åº”å¼æ•°æ® -->
      <div class="tab-content" id="tab1">
        <h2 class="section-title">åœºæ™¯2: å“åº”å¼æ•°æ®å¯¹æ¯”</h2>

        <div class="comparison-grid">
          <!-- ä¸ä½¿ç”¨ä»£ç† -->
          <div class="comparison-panel">
            <div class="panel-header">
              <span class="panel-icon">âŒ</span>
              <h3 class="panel-title without">ä¸ä½¿ç”¨ä»£ç†ï¼ˆæ‰‹åŠ¨æ›´æ–°UIï¼‰</h3>
            </div>
            <span class="stats-badge bad">æ‰‹åŠ¨è°ƒç”¨: ~15æ¬¡/æ“ä½œ</span>

            <div class="form-group">
              <label>è®¡æ•°å™¨: <span id="reactive-without-count">0</span></label>
              <input type="range" id="reactive-without-slider" min="0" max="100" value="0">
            </div>

            <div class="stat-card">
              <div class="stat-label">åŒå€å€¼</div>
              <div class="stat-value" id="reactive-without-double">0</div>
            </div>

            <div class="stat-card">
              <div class="stat-label">å¹³æ–¹å€¼</div>
              <div class="stat-value" id="reactive-without-square">0</div>
            </div>

            <button class="action-button without" onclick="updateWithoutReactive()">æ›´æ–°ï¼ˆéœ€æ‰‹åŠ¨è°ƒç”¨3ä¸ªUIæ›´æ–°å‡½æ•°ï¼‰</button>

            <div class="code-display">
              <div class="code-line"><span class="comment">// æ¯æ¬¡ä¿®æ”¹æ•°æ®éƒ½è¦æ‰‹åŠ¨æ›´æ–°UI</span></div>
              <div class="code-line"><span class="keyword">function</span> <span class="function">updateCount</span>(value) {</div>
              <div class="code-line">  count = value;</div>
              <div class="code-line">  <span class="comment">// æ‰‹åŠ¨æ›´æ–°æ¯ä¸ªç›¸å…³çš„UI</span></div>
              <div class="code-line">  updateCountDisplay();</div>
              <div class="code-line">  updateDoubleDisplay();</div>
              <div class="code-line">  updateSquareDisplay();</div>
              <div class="code-line">  <span class="comment">// å®¹æ˜“é—æ¼æŸä¸ªæ›´æ–°ï¼</span></div>
              <div class="code-line">}</div>
            </div>

            <div class="log-container" id="reactive-without-log"></div>
          </div>

          <!-- ä½¿ç”¨ä»£ç† -->
          <div class="comparison-panel">
            <div class="panel-header">
              <span class="panel-icon">âœ…</span>
              <h3 class="panel-title with">ä½¿ç”¨ä»£ç†ï¼ˆè‡ªåŠ¨æ›´æ–°UIï¼‰</h3>
            </div>
            <span class="stats-badge good">è‡ªåŠ¨æ›´æ–°: 0æ¬¡æ‰‹åŠ¨è°ƒç”¨</span>

            <div class="form-group">
              <label>è®¡æ•°å™¨: <span id="reactive-with-count">0</span></label>
              <input type="range" id="reactive-with-slider" min="0" max="100" value="0">
            </div>

            <div class="stat-card">
              <div class="stat-label">åŒå€å€¼</div>
              <div class="stat-value" id="reactive-with-double">0</div>
            </div>

            <div class="stat-card">
              <div class="stat-label">å¹³æ–¹å€¼</div>
              <div class="stat-value" id="reactive-with-square">0</div>
            </div>

            <button class="action-button with" onclick="updateWithReactive()">æ›´æ–°ï¼ˆè‡ªåŠ¨æ›´æ–°æ‰€æœ‰UIï¼‰</button>

            <div class="code-display">
              <div class="code-line"><span class="comment">// å®šä¹‰å‰¯ä½œç”¨ï¼Œè‡ªåŠ¨æ‰§è¡Œ</span></div>
              <div class="code-line"><span class="function">effect</span>(() => {</div>
              <div class="code-line">  countDisplay = state.count;</div>
              <div class="code-line">});</div>
              <div class="code-line"><span class="function">effect</span>(() => {</div>
              <div class="code-line">  doubleDisplay = state.count * <span class="number">2</span>;</div>
              <div class="code-line">});</div>
              <div class="code-line"><span class="comment">// ä¿®æ”¹æ•°æ®ï¼Œè‡ªåŠ¨è§¦å‘æ›´æ–°ï¼</span></div>
              <div class="code-line">state.count = <span class="number">10</span>; <span class="comment">// æ‰€æœ‰UIè‡ªåŠ¨æ›´æ–°</span></div>
            </div>

            <div class="log-container" id="reactive-with-log"></div>
          </div>
        </div>

        <div class="stats-container">
          <div class="stat-card">
            <div class="stat-label">æ‰‹åŠ¨è°ƒç”¨å‡å°‘</div>
            <div class="stat-value good">100%</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">UIæ›´æ–°æ¬¡æ•°ï¼ˆæ‰‹åŠ¨ï¼‰</div>
            <div class="stat-value bad" id="manual-updates">0</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">UIæ›´æ–°æ¬¡æ•°ï¼ˆè‡ªåŠ¨ï¼‰</div>
            <div class="stat-value good" id="auto-updates">0</div>
          </div>
        </div>
      </div>

      <!-- åœºæ™¯3: APIç¼“å­˜ -->
      <div class="tab-content" id="tab2">
        <h2 class="section-title">åœºæ™¯3: APIç¼“å­˜å¯¹æ¯”</h2>

        <div class="comparison-grid">
          <!-- ä¸ä½¿ç”¨ä»£ç† -->
          <div class="comparison-panel">
            <div class="panel-header">
              <span class="panel-icon">âŒ</span>
              <h3 class="panel-title without">ä¸ä½¿ç”¨ä»£ç†ï¼ˆæ¯ä¸ªAPIæ‰‹åŠ¨ç¼“å­˜ï¼‰</h3>
            </div>
            <span class="stats-badge bad">é‡å¤ä»£ç : ~30è¡Œ/æ–¹æ³•</span>

            <button class="action-button without" onclick="fetchUserWithoutProxy(1)">è·å–ç”¨æˆ·#1</button>
            <button class="action-button without" onclick="fetchUserWithoutProxy(1)">å†æ¬¡è·å–ç”¨æˆ·#1</button>
            <button class="action-button without" onclick="fetchPostsWithoutProxy()">è·å–æ–‡ç« åˆ—è¡¨</button>

            <div class="code-display">
              <div class="code-line"><span class="comment">// æ¯ä¸ªAPIæ–¹æ³•éƒ½è¦å†™ç¼“å­˜é€»è¾‘</span></div>
              <div class="code-line"><span class="keyword">async function</span> <span class="function">getUser</span>(id) {</div>
              <div class="code-line">  <span class="keyword">const</span> key = <span class="string">`user_${id}`</span>;</div>
              <div class="code-line">  <span class="comment">// æ£€æŸ¥ç¼“å­˜</span></div>
              <div class="code-line">  <span class="keyword">if</span> (cache.has(key)) {</div>
              <div class="code-line">    <span class="keyword">return</span> cache.get(key);</div>
              <div class="code-line">  }</div>
              <div class="code-line">  <span class="keyword">const</span> data = <span class="keyword">await</span> <span class="function">fetch</span>(...);</div>
              <div class="code-line">  cache.set(key, data);</div>
              <div class="code-line">  <span class="keyword">return</span> data;</div>
              <div class="code-line">}</div>
              <div class="code-line"><span class="comment">// getPosts() é‡å¤ç›¸åŒé€»è¾‘...</span></div>
            </div>

            <div class="stats-container">
              <div class="stat-card">
                <div class="stat-label">APIè¯·æ±‚</div>
                <div class="stat-value bad" id="api-without-requests">0</div>
              </div>
              <div class="stat-card">
                <div class="stat-label">ç¼“å­˜å‘½ä¸­</div>
                <div class="stat-value" id="api-without-cache">0</div>
              </div>
            </div>

            <div class="log-container" id="api-without-log"></div>
          </div>

          <!-- ä½¿ç”¨ä»£ç† -->
          <div class="comparison-panel">
            <div class="panel-header">
              <span class="panel-icon">âœ…</span>
              <h3 class="panel-title with">ä½¿ç”¨ä»£ç†ï¼ˆç»Ÿä¸€ç¼“å­˜å¤„ç†ï¼‰</h3>
            </div>
            <span class="stats-badge good">ç¼“å­˜é€»è¾‘: 1å¤„ç»Ÿä¸€å¤„ç†</span>

            <button class="action-button with" onclick="fetchUserWithProxy(1)">è·å–ç”¨æˆ·#1</button>
            <button class="action-button with" onclick="fetchUserWithProxy(1)">å†æ¬¡è·å–ç”¨æˆ·#1</button>
            <button class="action-button with" onclick="fetchPostsWithProxy()">è·å–æ–‡ç« åˆ—è¡¨</button>

            <div class="code-display">
              <div class="code-line"><span class="comment">// ä»£ç†ç»Ÿä¸€å¤„ç†æ‰€æœ‰APIçš„ç¼“å­˜</span></div>
              <div class="code-line"><span class="keyword">const</span> api = <span class="keyword">new</span> <span class="function">Proxy</span>(apiService, {</div>
              <div class="code-line">  <span class="function">get</span>(target, method) {</div>
              <div class="code-line">    <span class="keyword">return async</span> (...args) => {</div>
              <div class="code-line">      <span class="keyword">const</span> key = <span class="string">`${method}_${args}`</span>;</div>
              <div class="code-line">      <span class="keyword">if</span> (cache.has(key)) <span class="keyword">return</span> cache.get(key);</div>
              <div class="code-line">      <span class="keyword">const</span> data = <span class="keyword">await</span> target[method](...args);</div>
              <div class="code-line">      cache.set(key, data);</div>
              <div class="code-line">      <span class="keyword">return</span> data;</div>
              <div class="code-line">    };</div>
              <div class="code-line">  }</div>
              <div class="code-line">});</div>
              <div class="code-line"><span class="comment">// æ‰€æœ‰APIè‡ªåŠ¨æ”¯æŒç¼“å­˜ï¼</span></div>
            </div>

            <div class="stats-container">
              <div class="stat-card">
                <div class="stat-label">APIè¯·æ±‚</div>
                <div class="stat-value" id="api-with-requests">0</div>
              </div>
              <div class="stat-card">
                <div class="stat-label">ç¼“å­˜å‘½ä¸­</div>
                <div class="stat-value good" id="api-with-cache">0</div>
              </div>
            </div>

            <div class="log-container" id="api-with-log"></div>
          </div>
        </div>

        <div class="stats-container">
          <div class="stat-card">
            <div class="stat-label">ä»£ç é‡å¤å‡å°‘</div>
            <div class="stat-value good">90%</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">æ–°å¢APIæˆæœ¬</div>
            <div class="stat-value good">0è¡Œä»£ç </div>
          </div>
          <div class="stat-card">
            <div class="stat-label">ç»´æŠ¤æˆæœ¬</div>
            <div class="stat-value good">é™ä½80%</div>
          </div>
        </div>
      </div>
    </div>

    <!-- æ€»ç»“å¯¹æ¯” -->
    <div class="comparison-summary">
      <h2 style="font-size: 32px; margin-bottom: 20px;">ğŸ“Š å¯¹æ¯”æ€»ç»“</h2>

      <div class="summary-grid">
        <div class="summary-item without">
          <h4>âŒ ä¸ä½¿ç”¨ä»£ç†çš„é—®é¢˜</h4>
          <ul>
            <li>æ¯ä¸ªåŠŸèƒ½éƒ½è¦å†™é‡å¤ä»£ç </li>
            <li>ä»£ç é‡å¤§ï¼Œç»´æŠ¤æˆæœ¬é«˜</li>
            <li>å®¹æ˜“é—æ¼æŸäº›é€»è¾‘</li>
            <li>ä¿®æ”¹è§„åˆ™éœ€è¦æ”¹å¤šå¤„</li>
            <li>æ–°å¢åŠŸèƒ½æˆæœ¬é«˜</li>
          </ul>
        </div>

        <div class="summary-item with">
          <h4>âœ… ä½¿ç”¨ä»£ç†çš„ä¼˜åŠ¿</h4>
          <ul>
            <li>é€»è¾‘é›†ä¸­ï¼Œä¸€å¤„ç¼–å†™</li>
            <li>ä»£ç é‡å‡å°‘70-90%</li>
            <li>è‡ªåŠ¨æ‹¦æˆªï¼Œä¸ä¼šé—æ¼</li>
            <li>ä¿®æ”¹è§„åˆ™åªéœ€æ”¹ä¸€å¤„</li>
            <li>æ–°å¢åŠŸèƒ½é›¶æˆæœ¬</li>
          </ul>
        </div>
      </div>

      <div style="margin-top: 30px; padding: 20px; background: rgba(255,255,255,0.1); border-radius: 10px;">
        <h3 style="margin-bottom: 15px;">ğŸ’¡ æ ¸å¿ƒä»·å€¼</h3>
        <p style="font-size: 16px; line-height: 1.8;">
          ä»£ç†æ¨¡å¼çš„æœ¬è´¨æ˜¯<strong>"è‡ªåŠ¨åŒ–"</strong>å’Œ<strong>"ç»Ÿä¸€åŒ–"</strong>ã€‚
          å°±åƒåç«¯çš„Spring AOPè®©ä½ ä¸ç”¨åœ¨æ¯ä¸ªæ–¹æ³•é‡Œå†™äº‹åŠ¡ä»£ç ä¸€æ ·ï¼Œ
          å‰ç«¯çš„Proxyè®©ä½ ä¸ç”¨åœ¨æ¯ä¸ªåœ°æ–¹æ‰‹åŠ¨å†™éªŒè¯ã€æ›´æ–°ã€ç¼“å­˜ç­‰é‡å¤é€»è¾‘ã€‚
          <br><br>
          <strong>ä¸€å¥è¯æ€»ç»“ï¼šç”¨ä»£ç†ï¼Œè®©æœºå™¨åšé‡å¤çš„äº‹ï¼Œè®©äººä¸“æ³¨äºä¸šåŠ¡ï¼</strong>
        </p>
      </div>
    </div>
  </div>

  <script>
    // ========== å…¨å±€ç»Ÿè®¡ ==========
    let stats = {
      withoutValidations: 0,
      withValidations: 0,
      manualUpdates: 0,
      autoUpdates: 0,
      apiWithoutRequests: 0,
      apiWithoutCache: 0,
      apiWithRequests: 0,
      apiWithCache: 0
    };

    // ========== å·¥å…·å‡½æ•° ==========
    function addLog(containerId, message, type = 'info') {
      const container = document.getElementById(containerId);
      const entry = document.createElement('div');
      entry.className = `log-entry log-${type}`;
      entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
      container.insertBefore(entry, container.firstChild);

      // é™åˆ¶æ—¥å¿—æ¡æ•°
      while (container.children.length > 10) {
        container.removeChild(container.lastChild);
      }
    }

    function switchTab(index) {
      // åˆ‡æ¢æ ‡ç­¾æ ·å¼
      document.querySelectorAll('.tab').forEach((tab, i) => {
        tab.classList.toggle('active', i === index);
      });

      // åˆ‡æ¢å†…å®¹
      document.querySelectorAll('.tab-content').forEach((content, i) => {
        content.classList.toggle('active', i === index);
      });
    }

    // ========== åœºæ™¯1: è¡¨å•éªŒè¯ ==========

    // ä¸ä½¿ç”¨ä»£ç†çš„æ–¹å¼
    let withoutProxyData = { name: '', age: 0, email: '' };

    function validateName(value) {
      stats.withoutValidations++;
      document.getElementById('without-validations').textContent = stats.withoutValidations;

      if (value.length < 3) {
        return 'ç”¨æˆ·åè‡³å°‘éœ€è¦3ä¸ªå­—ç¬¦';
      }
      return null;
    }

    function validateAge(value) {
      stats.withoutValidations++;
      document.getElementById('without-validations').textContent = stats.withoutValidations;

      if (value < 0 || value > 150) {
        return 'å¹´é¾„å¿…é¡»åœ¨0-150ä¹‹é—´';
      }
      return null;
    }

    function validateEmail(value) {
      stats.withoutValidations++;
      document.getElementById('without-validations').textContent = stats.withoutValidations;

      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(value)) {
        return 'é‚®ç®±æ ¼å¼ä¸æ­£ç¡®';
      }
      return null;
    }

    document.getElementById('without-name').addEventListener('input', (e) => {
      const error = validateName(e.target.value);
      const errorDiv = document.getElementById('without-name-error');
      const input = e.target;

      if (error) {
        input.classList.add('error');
        input.classList.remove('success');
        errorDiv.textContent = error;
        errorDiv.classList.add('show');
        addLog('without-log', `âŒ éªŒè¯å¤±è´¥: ${error}`, 'error');
      } else {
        input.classList.remove('error');
        input.classList.add('success');
        errorDiv.classList.remove('show');
        withoutProxyData.name = e.target.value;
        addLog('without-log', `âœ… nameéªŒè¯é€šè¿‡`, 'success');
      }
    });

    document.getElementById('without-age').addEventListener('input', (e) => {
      const error = validateAge(e.target.value);
      const errorDiv = document.getElementById('without-age-error');
      const input = e.target;

      if (error) {
        input.classList.add('error');
        input.classList.remove('success');
        errorDiv.textContent = error;
        errorDiv.classList.add('show');
        addLog('without-log', `âŒ éªŒè¯å¤±è´¥: ${error}`, 'error');
      } else {
        input.classList.remove('error');
        input.classList.add('success');
        errorDiv.classList.remove('show');
        withoutProxyData.age = e.target.value;
        addLog('without-log', `âœ… ageéªŒè¯é€šè¿‡`, 'success');
      }
    });

    document.getElementById('without-email').addEventListener('input', (e) => {
      const error = validateEmail(e.target.value);
      const errorDiv = document.getElementById('without-email-error');
      const input = e.target;

      if (error) {
        input.classList.add('error');
        input.classList.remove('success');
        errorDiv.textContent = error;
        errorDiv.classList.add('show');
        addLog('without-log', `âŒ éªŒè¯å¤±è´¥: ${error}`, 'error');
      } else {
        input.classList.remove('error');
        input.classList.add('success');
        errorDiv.classList.remove('show');
        withoutProxyData.email = e.target.value;
        addLog('without-log', `âœ… emailéªŒè¯é€šè¿‡`, 'success');
      }
    });

    function submitWithoutProxy() {
      addLog('without-log', 'ğŸ“‹ æäº¤è¡¨å•ï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰', 'info');
      addLog('without-log', `æ•°æ®: ${JSON.stringify(withoutProxyData)}`, 'info');
    }

    // ä½¿ç”¨ä»£ç†çš„æ–¹å¼
    const validationRules = {
      name: (value) => value.length < 3 ? 'ç”¨æˆ·åè‡³å°‘éœ€è¦3ä¸ªå­—ç¬¦' : null,
      age: (value) => (value < 0 || value > 150) ? 'å¹´é¾„å¿…é¡»åœ¨0-150ä¹‹é—´' : null,
      email: (value) => !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value) ? 'é‚®ç®±æ ¼å¼ä¸æ­£ç¡®' : null
    };

    const withProxyData = new Proxy({}, {
      set(target, property, value) {
        stats.withValidations++;
        document.getElementById('with-validations').textContent = stats.withValidations;

        if (validationRules[property]) {
          const error = validationRules[property](value);
          const input = document.getElementById(`with-${property}`);
          const errorDiv = document.getElementById(`with-${property}-error`);

          if (error) {
            input.classList.add('error');
            input.classList.remove('success');
            errorDiv.textContent = error;
            errorDiv.classList.add('show');
            addLog('with-log', `âŒ ${property}éªŒè¯å¤±è´¥: ${error}`, 'error');
            throw new Error(error);
          } else {
            input.classList.remove('error');
            input.classList.add('success');
            errorDiv.classList.remove('show');
            addLog('with-log', `âœ… ${property}éªŒè¯é€šè¿‡: ${value}`, 'success');
          }
        }

        target[property] = value;
        return true;
      }
    });

    document.getElementById('with-name').addEventListener('input', (e) => {
      try {
        withProxyData.name = e.target.value;
      } catch (error) {}
    });

    document.getElementById('with-age').addEventListener('input', (e) => {
      try {
        withProxyData.age = e.target.value;
      } catch (error) {}
    });

    document.getElementById('with-email').addEventListener('input', (e) => {
      try {
        withProxyData.email = e.target.value;
      } catch (error) {}
    });

    function submitWithProxy() {
      addLog('with-log', 'ğŸ“‹ æäº¤è¡¨å•ï¼ˆä»£ç†æ–¹å¼ï¼‰', 'info');
      addLog('with-log', `æ•°æ®: ${JSON.stringify(withProxyData)}`, 'info');
    }

    // ========== åœºæ™¯2: å“åº”å¼æ•°æ® ==========

    // ä¸ä½¿ç”¨ä»£ç†
    let withoutReactiveCount = 0;

    document.getElementById('reactive-without-slider').addEventListener('input', (e) => {
      withoutReactiveCount = Number(e.target.value);

      // æ‰‹åŠ¨æ›´æ–°UI
      stats.manualUpdates += 3;
      document.getElementById('manual-updates').textContent = stats.manualUpdates;

      document.getElementById('reactive-without-count').textContent = withoutReactiveCount;
      document.getElementById('reactive-without-double').textContent = withoutReactiveCount * 2;
      document.getElementById('reactive-without-square').textContent = withoutReactiveCount ** 2;

      addLog('reactive-without-log', `æ‰‹åŠ¨æ›´æ–°3å¤„UI: count=${withoutReactiveCount}`, 'warning');
    });

    function updateWithoutReactive() {
      addLog('reactive-without-log', 'éœ€è¦è®°å¾—è°ƒç”¨: updateCountDisplay(), updateDoubleDisplay(), updateSquareDisplay()', 'error');
      addLog('reactive-without-log', 'å®¹æ˜“é—æ¼æŸä¸ªæ›´æ–°ï¼', 'error');
    }

    // ä½¿ç”¨ä»£ç†ï¼ˆç®€åŒ–ç‰ˆå“åº”å¼ï¼‰
    const effectStack = [];
    const targetMap = new WeakMap();

    function track(target, key) {
      const effect = effectStack[effectStack.length - 1];
      if (!effect) return;

      let depsMap = targetMap.get(target);
      if (!depsMap) {
        targetMap.set(target, (depsMap = new Map()));
      }

      let dep = depsMap.get(key);
      if (!dep) {
        depsMap.set(key, (dep = new Set()));
      }
      dep.add(effect);
    }

    function trigger(target, key) {
      const depsMap = targetMap.get(target);
      if (!depsMap) return;

      const dep = depsMap.get(key);
      if (dep) {
        dep.forEach(effect => {
          stats.autoUpdates++;
          document.getElementById('auto-updates').textContent = stats.autoUpdates;
          effect();
        });
      }
    }

    function reactive(target) {
      return new Proxy(target, {
        get(obj, key) {
          track(obj, key);
          return obj[key];
        },
        set(obj, key, value) {
          obj[key] = value;
          trigger(obj, key);
          return true;
        }
      });
    }

    function effect(fn) {
      effectStack.push(fn);
      fn();
      effectStack.pop();
    }

    const reactiveState = reactive({ count: 0 });

    effect(() => {
      document.getElementById('reactive-with-count').textContent = reactiveState.count;
    });

    effect(() => {
      document.getElementById('reactive-with-double').textContent = reactiveState.count * 2;
    });

    effect(() => {
      document.getElementById('reactive-with-square').textContent = reactiveState.count ** 2;
    });

    document.getElementById('reactive-with-slider').addEventListener('input', (e) => {
      reactiveState.count = Number(e.target.value);
      addLog('reactive-with-log', `âœ… è‡ªåŠ¨æ›´æ–°æ‰€æœ‰UI: count=${reactiveState.count}`, 'success');
    });

    function updateWithReactive() {
      addLog('reactive-with-log', 'åªéœ€ä¿®æ”¹æ•°æ®ï¼Œæ‰€æœ‰UIè‡ªåŠ¨æ›´æ–°ï¼', 'success');
      addLog('reactive-with-log', 'ä¸éœ€è¦æ‰‹åŠ¨è°ƒç”¨ä»»ä½•æ›´æ–°å‡½æ•°', 'success');
    }

    // ========== åœºæ™¯3: APIç¼“å­˜ ==========

    const withoutProxyCache = new Map();
    const withProxyCache = new Map();

    // æ¨¡æ‹ŸAPIå»¶è¿Ÿ
    function delay(ms) {
      return new Promise(resolve => setTimeout(resolve, ms));
    }

    // ä¸ä½¿ç”¨ä»£ç†
    async function fetchUserWithoutProxy(id) {
      const key = `user_${id}`;

      if (withoutProxyCache.has(key)) {
        stats.apiWithoutCache++;
        document.getElementById('api-without-cache').textContent = stats.apiWithoutCache;
        addLog('api-without-log', `âœ… ç¼“å­˜å‘½ä¸­: user ${id}`, 'success');
        return withoutProxyCache.get(key);
      }

      stats.apiWithoutRequests++;
      document.getElementById('api-without-requests').textContent = stats.apiWithoutRequests;
      addLog('api-without-log', `ğŸ“¡ APIè¯·æ±‚: user ${id}`, 'warning');

      await delay(500);
      const data = { id, name: `User ${id}` };
      withoutProxyCache.set(key, data);

      addLog('api-without-log', `éœ€è¦åœ¨æ¯ä¸ªæ–¹æ³•é‡Œå†™ç¼“å­˜é€»è¾‘ï¼`, 'error');
      return data;
    }

    async function fetchPostsWithoutProxy() {
      const key = 'posts';

      if (withoutProxyCache.has(key)) {
        stats.apiWithoutCache++;
        document.getElementById('api-without-cache').textContent = stats.apiWithoutCache;
        addLog('api-without-log', `âœ… ç¼“å­˜å‘½ä¸­: posts`, 'success');
        return withoutProxyCache.get(key);
      }

      stats.apiWithoutRequests++;
      document.getElementById('api-without-requests').textContent = stats.apiWithoutRequests;
      addLog('api-without-log', `ğŸ“¡ APIè¯·æ±‚: posts`, 'warning');

      await delay(500);
      const data = [{ id: 1, title: 'Post 1' }];
      withoutProxyCache.set(key, data);

      addLog('api-without-log', `åˆè¦é‡å¤å†™ç¼“å­˜é€»è¾‘ï¼`, 'error');
      return data;
    }

    // ä½¿ç”¨ä»£ç†
    class ApiService {
      async getUser(id) {
        await delay(500);
        return { id, name: `User ${id}` };
      }

      async getPosts() {
        await delay(500);
        return [{ id: 1, title: 'Post 1' }];
      }
    }

    const apiProxy = new Proxy(new ApiService(), {
      get(target, method) {
        const original = target[method];
        if (typeof original !== 'function') return original;

        return async (...args) => {
          const key = `${method}_${JSON.stringify(args)}`;

          if (withProxyCache.has(key)) {
            stats.apiWithCache++;
            document.getElementById('api-with-cache').textContent = stats.apiWithCache;
            addLog('api-with-log', `âœ… ç¼“å­˜å‘½ä¸­: ${method}`, 'success');
            return withProxyCache.get(key);
          }

          stats.apiWithRequests++;
          document.getElementById('api-with-requests').textContent = stats.apiWithRequests;
          addLog('api-with-log', `ğŸ“¡ APIè¯·æ±‚: ${method}`, 'info');

          const data = await original.apply(target, args);
          withProxyCache.set(key, data);

          addLog('api-with-log', `æ‰€æœ‰APIè‡ªåŠ¨æ”¯æŒç¼“å­˜ï¼`, 'success');
          return data;
        };
      }
    });

    async function fetchUserWithProxy(id) {
      await apiProxy.getUser(id);
    }

    async function fetchPostsWithProxy() {
      await apiProxy.getPosts();
    }

    // åˆå§‹åŒ–æ—¥å¿—
    addLog('without-log', 'ğŸ’¡ æ¯ä¸ªå­—æ®µéƒ½è¦å†™setterå’ŒéªŒè¯é€»è¾‘', 'info');
    addLog('with-log', 'ğŸ’¡ åªéœ€é…ç½®è§„åˆ™ï¼Œè‡ªåŠ¨æ‹¦æˆªæ‰€æœ‰èµ‹å€¼', 'info');
  </script>
</body>
</html>
